# Do not modify this file!  It was generated by ‘nixos-generate-config’
# and may be overwritten by future invocations.  Please make changes
# to /etc/nixos/configuration.nix instead.
{ config, pkgs, ... }:

{
  imports =
    [ <nixpkgs/nixos/modules/installer/scan/not-detected.nix>
    ];

  boot = {
    initrd.availableKernelModules = [
      "uhci_hcd"
      "ehci_hcd"
      "ata_piix"
      "ahci"
      "firewire_ohci"
      "usbcore"
      "sd_mod"
      "ohci_hcd"
      "usb_storage"
      "scsi_mod"
    ];
    kernelModules = [ "kvm-intel" ];
    extraModulePackages = [ ];
    extraModprobeConfig = ''
      options thinkpad-acpi brightness_mode=1
      options ath9k nohwcrypt=1
    '';
  };

  fileSystems."/" =
    { device = "/dev/disk/by-label/internal";
      fsType = "ext4";
    };

  swapDevices = [
    # Always make a file of a few GB, in case the partition isn't available
    {
      device = "/var/swapfile";
      size = 5000; # MB
    }
    # Swap partition: bug, might be faster than a file; might not be available
    { device = "/dev/disk/by-uuid/d77fba25-d351-453c-83bc-18f51cde563c"; }
  ];

  nix.maxJobs = 2;
}
